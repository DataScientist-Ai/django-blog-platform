{% extends 'blog_buster/base.html' %}

{% block title %}{{ guide.title }} - Buying Guide{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto px-5 grid lg:grid-cols-[2fr,1fr] gap-10">
    <article class="bg-white border border-neutral-100 rounded-[32px] p-6 sm:p-10 shadow-card">
        <header class="space-y-3 mb-8">
            <p class="text-xs uppercase tracking-[0.4em] text-neutral-400">{{ guide.category.name|default:"Guide" }}</p>
            <h1 class="text-4xl font-serif text-neutral-900 leading-tight">{{ guide.title }}</h1>
            <p class="text-lg text-neutral-600">{{ guide.summary }}</p>
            {% if guide.hero_quote %}
            <blockquote class="border-l-4 border-brand pl-4 italic text-neutral-700">{{ guide.hero_quote }}</blockquote>
            {% endif %}
        </header>

        {% if guide.picks.all %}
        <div class="space-y-6">
            {% for pick in guide.picks.all %}
            <section class="border border-neutral-100 rounded-3xl p-6 bg-neutral-50">
                <div class="flex flex-col gap-2 md:flex-row md:items-center md:justify-between">
                    <div>
                        <p class="text-xs uppercase tracking-[0.4em] text-brand">{{ pick.verdict }}</p>
                        <h2 class="text-2xl font-semibold text-neutral-900">{{ pick.title }}</h2>
                        <p class="text-sm text-neutral-500">{{ pick.tagline }}</p>
                    </div>
                    <div class="text-right text-sm text-neutral-500">
                        <p>Rating: <span class="font-semibold text-neutral-900">{{ pick.rating }}/5</span></p>
                        {% if pick.price_range %}<p>{{ pick.price_range }}</p>{% endif %}
                    </div>
                </div>
                <div class="mt-4 grid gap-4 md:grid-cols-2 text-sm">
                    <div>
                        <p class="uppercase tracking-[0.3em] text-neutral-500 mb-2">Pros</p>
                        <ul class="space-y-1 text-neutral-800">
                            {% for item in pick.pros.splitlines %}
                            {% if item %}<li>• {{ item }}</li>{% endif %}
                            {% endfor %}
                        </ul>
                    </div>
                    <div>
                        <p class="uppercase tracking-[0.3em] text-neutral-500 mb-2">Cons</p>
                        <ul class="space-y-1 text-neutral-800">
                            {% for item in pick.cons.splitlines %}
                            {% if item %}<li>• {{ item }}</li>{% endif %}
                            {% endfor %}
                        </ul>
                    </div>
                </div>
                {% if pick.affiliate_url %}
                <a href="{{ pick.affiliate_url }}" target="_blank" rel="nofollow noopener" class="mt-4 inline-flex items-center gap-2 rounded-full px-4 py-2 bg-neutral-900 text-white text-sm font-semibold">
                    Shop this pick <span aria-hidden="true">→</span>
                </a>
                {% endif %}
            </section>
            {% endfor %}
        </div>
        {% endif %}
    </article>

    <div class="space-y-6">
        {% include 'blog_buster/partials/sidebar_widgets.html' %}
    </div>
</div>
{% endblock %}

